<analysis>

**original_problem_statement**: The user's overarching goal is to evolve the application into a robust, scalable platform for managing client access to marketing services. This involves a multi-phase refactoring initiative with three primary pillars:

1.  **Client-Centric Governance:** Refactor the admin UI to pivot from an account-centric to a client-centric view.
2.  **Declarative, Manifest-Driven Architecture:** All plugin capabilities must be explicitly declared in a , which drives the application's runtime logic, validation, and UI.
3.  **Unified Plugin Interface:** Standardize the core access provisioning operations (, , ) into a single, consistent interface () that all plugins must implement.

**User's preferred language**: English

**what currently exists?**
The application now features a dynamic plugin auto-discovery system. Previously, the  page only displayed a static list of 15 platforms read from the database. Now, on application startup, a synchronization process reads the manifests of all 19 plugins from the filesystem, automatically creates or updates their corresponding entries in the  MongoDB collection, and the catalog page dynamically displays all of them. This makes adding new plugins a drop-in process.

**Last working item**:
    - Last item agent was working: Fixing a critical bug reported by the user where the  page was not showing all available plugins. The agent implemented a robust auto-discovery and database synchronization system to make the catalog page dynamically reflect all plugins present in the filesystem.
    - Status: USER VERIFICATION PENDING
    - Agent Testing Done: Y
    - Which testing method agent to use? The fix can be verified visually with the  on the  page. A full regression test can be done by the .
    - User Testing Done: N

**All Pending/In progress Issue list**:
  Issue 1:  Google Ads integration is partially non-functional. (P1)
  
  Issues Detail:
  - Issue 1: 
     - **Description**: The Google Ads  flow fails because it requires a valid  to be set in the  file. While the grant/verify/revoke methods are implemented, the initial step of finding accounts to manage is blocked.
     - **Attempted fixes**: This issue has been deferred by the user in a previous session.
     - **Next debug checklist**: 
       1. Obtain a valid Google Ads Developer Token from the user.
       2. Add the token to : .
       3. Restart the backend service.
       4. Test the Onboard Account flow for the Google Ads integration in the UI.
     - **Why fix this issue and what will be achieved with the fix?** This will make the Google Ads plugin fully functional, enabling users to onboard and manage Google Ads accounts.
     - **Status**:  BLOCKED
     - **Is recurring issue?** Y
     - **Should Test frontend/backend/both after fix?** both
     - **Blocked on other issue**: User input (developer token).

**In progress Task List**:
None.

**Upcoming and Future Tasks**

    Upcoming Tasks:
    - **P0: User Verification of Auto-Discovery Fix**: The user needs to verify that the catalog page now correctly shows all plugins. This is the highest priority as it was a direct user-reported bug.
    - **P1: User Verification of 19 Plugins**: The original pending task. The user needs to review and verify the massive implementation of the 14 new and updated plugins to ensure the work meets their expectations before proceeding.

    Future Tasks:
    - **P1: Full End-to-End Testing**: Systematically test each of the 19 plugins with real API credentials to validate the full lifecycle (grant, verify, revoke) for each one.
    - **P2: Housekeeping & Cleanup**: Perform general code cleanup, remove any obsolete code, and ensure file structures are consistent. (A first pass of this was completed, but further refactoring is possible).

**Completed work in this session**
- **Bug Fix: Plugin Auto-Discovery System (P0)**:
  - Implemented a system to automatically discover plugins from the filesystem, sync them to the database, and display them on the  page.
  - Modified  to add a  field to the .
  - Updated all 19 plugin manifests () with the new  field.
  - Created a database upsert function in  to synchronize manifests to the  collection.
  - Added one-time startup sync logic to .
  - Updated multiple name/key/slug mappings in  and  for consistency.
  - Verified the fix with API calls, screenshots, and confirmed no regressions by running the 383-test Jest suite.
- **Codebase Cleanup (P2)**:
  - Removed over 20 obsolete root-level test files, empty plugin API directories, and other unnecessary artifacts to clean up the project structure.

**Earlier issues found/mentioned but not fixed**
   - The Google Ads integration issue (listed in 'All Pending/In progress Issue list') remains blocked on user input.

**Known issue recurrence from previous fork**
  - None.

**Code Architecture**
domainupsertCatalogPlatformFromManifestdomain

**Key Technical Concepts**
-   **Filesystem-based Auto-Discovery:** The application no longer relies on a static database list. It discovers plugins by reading their manifests from the filesystem.
-   **DB Synchronization on Startup:** A one-time process on application startup synchronizes the state of the plugins from the filesystem manifests into the MongoDB  collection, which then serves as a cache for the frontend.
-   **Unified Plugin Interface:** All 19 plugins implement the  interface.
-   **Declarative Manifests:** Plugin behavior is declared in manifests, now including the , which drives the dynamic catalog.
-   **Test-Driven Stability:** The Jest unit suite (383 tests) was used to ensure major refactoring and bug fixes did not introduce regressions.

**key DB schema**
  - **catalog_platforms**:
    - **Purpose**: Caches plugin information for display in the catalog.
    - **Population**: Previously manual, now automatically populated and updated on application startup from plugin manifests.
    - **Key Columns**: , , , , , .

**changes in tech stack**
- No changes to the tech stack.

**All files of reference**
- **Modified**:
  - : Added  to the  interface.
  -  (all 19 of them): Added the  property.
  - : Added the  function.
  - : Added startup sync logic and updated key/name mappings.
  - : Updated to handle dynamic data and fix data mapping.
- **Deleted**:
  -  obsolete test files from the project root (e.g., , ). The main test suite in  remains.
  -  empty  directories from within plugin folders.
  - , .

**Areas that need refactoring**:
- **Consolidate Mappings**: There are several hardcoded mappings between plugin names, keys, and slugs in both the frontend () and backend (). These could be consolidated into a single source of truth to reduce redundancy and potential for bugs.
- **Legacy DB Cleanup**: The database synchronization revealed 3 legacy platforms in the DB that do not have corresponding plugins (, , ). A cleanup script or manual process could remove these.

**key api endpoints**
-   : This endpoint is now fully dynamic. It triggers the DB sync (if not already run) and returns all discoverable plugins from the database.
-   : Now includes the  field in its response for each plugin.

**Critical Info for New Agent**
- The immediate priority is user verification. First, for the bug fix you just completed (the auto-discovery system), and second, for the original large-scale implementation of 19 plugins.
- The user reported the catalog bug, interrupting the previous agent's plan to . Do not proceed with new tasks until the user confirms the fix for the catalog.
- The 
> nextjs-mongo-template@0.1.0 test
> jest --forceExit command is your safety net. Run it after any significant changes to ensure no regressions in the core logic.
- The Google Ads plugin remains blocked, pending a developer token from the user. Do not attempt to work on it.

**documents created in this job**
-  was updated.

**Last 10 User Messages and any pending HUMAN messages** 
1.  **User**:  (BUG REPORT - P0) - **Status: FIXED, PENDING USER VERIFICATION**
2.  **User**:  (TASK) - **Status: COMPLETED**

**Project Health Check:**
- **Broken**: The Google Ads  flow remains blocked pending a developer token from the user.
- **Mocked**: API calls in most of the 15 non-Google plugins are unverified as they use placeholder tokens. Manual plugins return instructions instead of performing API calls.

**3rd Party Integrations**
- No change. The list includes Google Ads, Google Analytics, Meta Graph API, Salesforce, HubSpot, Snowflake, and 13 others (some fully integrated, some with OAuth + manual steps).

**Testing status**
  - Testing agent used after significant changes: NO (The agent self-tested the bug fix extensively with , screenshots, and running the existing Jest suite).
  - Troubleshoot agent used after agent stuck in loop: NO
  - Test files created: None. Obsolete test files were deleted.
  - Known regressions: None. The Jest suite of 383 tests passes.

**Credentials to test flow:**
- Most credentials in  are placeholders.
- A valid  is still required to test the Google Ads plugin fully.

**What agent forgot to execute**
- The agent correctly adapted to the user's urgent bug report, postponing its original plan to finish the job after the cleanup task. No tasks were forgotten; priorities were correctly reassessed.

</analysis>
